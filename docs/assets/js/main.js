"use strict";const form=document.querySelector("js-form"),searchInput=document.querySelector(".js-searchText"),searchBtn=document.querySelector(".js-searchBtn"),filmsList=document.querySelector(".js-filmList"),favoriteSection=document.querySelector(".js-favoriteItems");let allData=[],favoriteFilms=[];function handleSearch(e){e.preventDefault(),fetch("//api.tvmaze.com/search/shows?q="+searchInput.value).then(e=>e.json()).then(e=>{allData=e,renderFilms(allData),localStorage.setItem("allData",JSON.stringify(allData))})}function renderFilms(e){filmsList.innerHTML="";for(const t of e){const e=t.show;if(void 0===favoriteFilms.find(t=>t.show.id===e.id)){filmsList.innerHTML+=`<li class="liElement js-liElement" data-id="${e.id}"><h3 class="liTitle js-titleItem">${e.name}</h3><img class="js-liPic${e.id} liPic"></img></li>`;const t=document.querySelector(".js-liPic"+e.id);null===e.image?t.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=???"):t.setAttribute("src",""+e.image.medium)}else{filmsList.innerHTML+=`<li class="js-liElement liFavorite" data-id="${e.id}"><h3 class="liTitleFav js-titleItem">${e.name}</h3><img class="js-liPicFav${e.id} liPicFav"></img></li>`;const t=document.querySelector(".js-liPicFav"+e.id);null===e.image?t.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=???"):t.setAttribute("src",""+e.image.medium)}}addListenersToFilm()}if(searchBtn.addEventListener("click",handleSearch),null!==localStorage.getItem("favData")){const e=JSON.parse(localStorage.getItem("favData"));console.log(e),renderFavorites(e)}function renderFavorites(e){for(const t of e){null===t&&(favoriteSection.innerHTML+="<h3>Hola</h3>"),favoriteSection.innerHTML+=`<li class="liFav js-liFav" data-id="${t.show.id}"><h3 class="titleFav js-titleFav">${t.show.name}</h3><img class="js-picFav${t.show.id} picFav"></img></li><div class= "line"></div>`;const e=document.querySelector(".js-picFav"+t.show.id);null===t.show.image?e.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=???"):e.setAttribute("src",""+t.show.image.medium)}}function addListenersToFilm(){const e=document.querySelectorAll(".js-liElement");for(const t of e)t.addEventListener("click",handleClickFilm)}function handleClickFilm(e){const t=e.currentTarget,i=parseInt(t.dataset.id);if(void 0===favoriteFilms.find(e=>e.show.id===i)){const e=allData.find(e=>e.show.id===i);favoriteFilms.push(e)}else favoriteFilms=favoriteFilms.filter(e=>e.show.id!==i);localStorage.setItem("favData",JSON.stringify(favoriteFilms)),renderFilms(allData),renderFavorites(favoriteFilms)}